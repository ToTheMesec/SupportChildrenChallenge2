{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SaveChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SaveChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SaveChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SaveChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SaveChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SaveChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SaveChildrenV2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Luka\\\\Desktop\\\\SaveChildrenV2.0\\\\client\\\\src\\\\components\\\\InputCampaign.js\";\nimport React, { Fragment, Component } from 'react';\nimport Web3 from 'web3';\nimport SupportChildren from \"../abis/SupportChildren.json\";\nimport axios from 'axios';\nimport ipfs from \"../ipfs\"; //@author Luka\n\nvar InputCampaign = /*#__PURE__*/function (_Component) {\n  _inherits(InputCampaign, _Component);\n\n  function InputCampaign(props) {\n    var _this;\n\n    _classCallCheck(this, InputCampaign);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InputCampaign).call(this, props));\n\n    _this.fileSelectedHandler = function (event) {\n      console.log(event.target.files[0]);\n\n      _this.setState({\n        selectedFile: event.target.files[0]\n      });\n\n      _this.captureFile(event);\n    };\n\n    _this.fileUploadHandler = function (evt) {\n      evt.preventDefault();\n      var formData = new FormData();\n      formData.append(\"file\", _this.state.selectedFile);\n      formData.append(\"upload_preset\", \"nftauction\");\n\n      _this.onSubmit();\n\n      axios.post(\"https://api.cloudinary.com/v1_1/tothemoon/image/upload\", formData, {\n        onUploadProgress: function onUploadProgress(progressEvent) {\n          console.log(\"Upload progress \" + Math.round(progressEvent.loaded / progressEvent.total * 100) + \"%\");\n\n          _this.setState({\n            prog: progressEvent.loaded / progressEvent.total * 100\n          });\n        }\n      }).then(function (res) {\n        console.log(res.data.secure_url);\n\n        _this.setState({\n          img: res.data.secure_url\n        });\n      });\n    };\n\n    _this.captureFile = function (event) {\n      event.stopPropagation();\n      event.preventDefault();\n      var file = event.target.files[0];\n      var reader = new window.FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onloadend = function () {\n        return _this.convertToBuffer(reader);\n      };\n    };\n\n    _this.convertToBuffer = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(reader) {\n        var buffer;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return Buffer.from(reader.result);\n\n              case 2:\n                buffer = _context.sent;\n\n                //set this buffer -using es6 syntax\n                _this.setState({\n                  buffer: buffer\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.onSubmit = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return ipfs.add(_this.state.buffer, function (err, ipfsHash) {\n                console.log(err, ipfsHash); //TODO\n\n                //TODO\n                _this.setState({\n                  ipfsHash: ipfsHash[0].hash\n                });\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    _this.onSubmitForm = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(evt) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                evt.preventDefault();\n\n                _this.state.contract.methods.createCampaign(_this.state.account, 1928010725).send({\n                  from: _this.state.account\n                }).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n                  var body, response;\n                  return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                    while (1) {\n                      switch (_context3.prev = _context3.next) {\n                        case 0:\n                          _context3.prev = 0;\n                          body = {\n                            title: _this.state.title,\n                            description: _this.state.description,\n                            email: _this.state.email,\n                            deadline: _this.state.deadline,\n                            goal: _this.state.goal,\n                            currency: _this.state.currency,\n                            category: _this.state.category,\n                            url: \"https://ipfs.io/ipfs/\" + _this.state.ipfsHash\n                          };\n                          console.log(body);\n                          _context3.next = 5;\n                          return fetch(\"http://localhost:5000/create-campaign\", {\n                            method: \"POST\",\n                            headers: {\n                              \"Content-Type\": \"application/json\"\n                            },\n                            body: JSON.stringify(body)\n                          });\n\n                        case 5:\n                          response = _context3.sent;\n                          window.location = \"/create-campaign\";\n                          _context3.next = 12;\n                          break;\n\n                        case 9:\n                          _context3.prev = 9;\n                          _context3.t0 = _context3[\"catch\"](0);\n                          console.log(_context3.t0.message);\n\n                        case 12:\n                        case \"end\":\n                          return _context3.stop();\n                      }\n                    }\n                  }, _callee3, null, [[0, 9]]);\n                })));\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      contract: null,\n      account: '',\n      title: '',\n      description: '',\n      email: '',\n      deadline: '',\n      goal: '',\n      category: '',\n      currency: '',\n      selectedFile: '',\n      img: '',\n      prog: 0,\n      ipfsHash: '',\n      buffer: '',\n      ethAddress: '',\n      blockNumber: '',\n      transactionHash: '',\n      gasUsed: '',\n      txReceipt: ''\n    };\n    return _this;\n  }\n\n  _createClass(InputCampaign, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.loadWeb3();\n\n              case 2:\n                _context5.next = 4;\n                return this.loadBlockchainData();\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"loadWeb3\",\n    value: function () {\n      var _loadWeb = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!window.ethereum) {\n                  _context6.next = 6;\n                  break;\n                }\n\n                window.web3 = new Web3(window.ethereum);\n                _context6.next = 4;\n                return window.ethereum.enable();\n\n              case 4:\n                _context6.next = 7;\n                break;\n\n              case 6:\n                if (window.web3) {\n                  window.web3 = new Web3(window.web3.currentProvider);\n                } else {\n                  window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!');\n                }\n\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function loadWeb3() {\n        return _loadWeb.apply(this, arguments);\n      }\n\n      return loadWeb3;\n    }()\n  }, {\n    key: \"loadBlockchainData\",\n    value: function () {\n      var _loadBlockchainData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        var web3, accountWeb3, addressField, networkId, networkData, abi, address, contractWeb3;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                web3 = window.web3; // Load account\n\n                _context7.next = 3;\n                return web3.eth.getAccounts();\n\n              case 3:\n                accountWeb3 = _context7.sent;\n                this.setState({\n                  account: accountWeb3[0]\n                });\n                addressField = document.getElementById(\"address\");\n                addressField.innerHTML = accountWeb3[0];\n                _context7.next = 9;\n                return web3.eth.net.getId();\n\n              case 9:\n                networkId = _context7.sent;\n                _context7.next = 12;\n                return SupportChildren.networks[networkId];\n\n              case 12:\n                networkData = _context7.sent;\n\n                if (networkData) {\n                  abi = SupportChildren.abi;\n                  address = networkData.address;\n                  contractWeb3 = new web3.eth.Contract(abi, address);\n                  this.setState({\n                    contract: contractWeb3\n                  });\n                } else {\n                  window.alert('Smart contract not deployed to detected network');\n                }\n\n              case 14:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function loadBlockchainData() {\n        return _loadBlockchainData.apply(this, arguments);\n      }\n\n      return loadBlockchainData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"rootdiv\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"main\", {\n        role: \"main\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"clearfix\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"formTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 24\n        }\n      }, \"Fundraising information\"))), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"clearfix\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"formUnderTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 24\n        }\n      }, \"Add the Fundraising information in the fields below.\"))), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"clearfix\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"visina100\",\n        className: \"fundraisingTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 68\n        }\n      }, \"Fundraising title\"), /*#__PURE__*/React.createElement(\"input\", {\n        placeholder: \"Enter Fundraising title\",\n        type: \"text\",\n        onChange: function onChange(evt) {\n          return _this2.setState({\n            title: evt.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 92\n        }\n      }))), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"clearfix\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"visina150\",\n        className: \"fundraisingMainImage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"paragraf\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 72\n        }\n      }, \"Fundrasing main image\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 18\n        }\n      }, \"This image will appear as the cover photo\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 62\n        }\n      }), \" for your fundraising.\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 18\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        id: \"upload\",\n        type: \"file\",\n        hidden: true,\n        onChange: this.fileSelectedHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        id: \"uploadLabel\",\n        for: \"upload\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 98\n        }\n      })))), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"uploadBtn btn btn-primary\",\n        onClick: function onClick(evt) {\n          return _this2.fileUploadHandler(evt);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 26\n        }\n      }, \"Upload\"), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"clearfix\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"visina100\",\n        className: \"amountNeed\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"amountNeedtekst\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 22\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"p\", {\n        className: \"paragraf\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 49\n        }\n      }, \"Amount need\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 88\n        }\n      }, \"Enter the amount you need for \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 121\n        }\n      }), \"your fundraising.\"))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"inputSelect\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        id: \"kripto\",\n        onChange: function onChange(evt) {\n          return _this2.setState({\n            currency: evt.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"eth\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }\n      }, \"ETH\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"btc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }\n      }, \"BTC\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"ltc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 21\n        }\n      }, \"LTC\")), /*#__PURE__*/React.createElement(\"input\", {\n        placeholder: \"Enter amount\",\n        id: \"amountNeedbroj\",\n        type: \"number\",\n        step: \"0.0000001\",\n        onChange: function onChange(evt) {\n          return _this2.setState({\n            goal: evt.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 21\n        }\n      }))), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"clearfix\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"visina150\",\n        className: \"amountNeed\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"amountNeedtekst\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 22\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"p\", {\n        className: \"paragraf\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 49\n        }\n      }, \"Description\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 88\n        }\n      }, \"Explain your reasons why are you \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 124\n        }\n      }), \"starting this fundraising.\"), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"textarea\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 22\n        }\n      }, /*#__PURE__*/React.createElement(\"textarea\", {\n        placeholder: \"Enter fundraising description\",\n        onChange: function onChange(evt) {\n          return _this2.setState({\n            description: evt.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 41\n        }\n      }))))), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"clearfix\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"visina100\",\n        className: \"amountNeed\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"amountNeedtekst\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 22\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"p\", {\n        className: \"paragraf\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 49\n        }\n      }, \"Add category\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 89\n        }\n      }, \"These images will appear as additional photos, \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 139\n        }\n      }), \"which will help donators your story.\"))), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"categorySelect\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        id: \"category\",\n        onChange: function onChange(evt) {\n          return _this2.setState({\n            category: evt.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        disabled: true,\n        selected: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }\n      }, \"Pick a category\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"health\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 21\n        }\n      }, \"Health\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"education\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }\n      }, \"Education\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Last wish\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }\n      }, \"Last wish\")))), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"clearfix\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"visina150\",\n        className: \"amountNeed\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"amountNeedtekst\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 22\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"p\", {\n        className: \"paragraf\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 49\n        }\n      }, \"End of the fundraise\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 97\n        }\n      }, \"Let know other people when is the end date \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 143\n        }\n      }), \"of your fundraise.\")), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 22\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        onChange: function onChange(evt) {\n          return _this2.setState({\n            deadline: evt.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 27\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"dugmeCreate\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        id: \"create\",\n        onClick: this.onSubmitForm,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 48\n        }\n      }, \"Create\"))))))));\n    }\n  }]);\n\n  return InputCampaign;\n}(Component);\n\n;\nexport default InputCampaign;","map":{"version":3,"sources":["C:/Users/Luka/Desktop/SaveChildrenV2.0/client/src/components/InputCampaign.js"],"names":["React","Fragment","Component","Web3","SupportChildren","axios","ipfs","InputCampaign","props","fileSelectedHandler","event","console","log","target","files","setState","selectedFile","captureFile","fileUploadHandler","evt","preventDefault","formData","FormData","append","state","onSubmit","post","onUploadProgress","progressEvent","Math","round","loaded","total","prog","then","res","data","secure_url","img","stopPropagation","file","reader","window","FileReader","readAsArrayBuffer","onloadend","convertToBuffer","Buffer","from","result","buffer","add","err","ipfsHash","hash","onSubmitForm","contract","methods","createCampaign","account","send","body","title","description","email","deadline","goal","currency","category","url","fetch","method","headers","JSON","stringify","response","location","message","ethAddress","blockNumber","transactionHash","gasUsed","txReceipt","loadWeb3","loadBlockchainData","ethereum","web3","enable","currentProvider","alert","eth","getAccounts","accountWeb3","addressField","document","getElementById","innerHTML","net","getId","networkId","networks","networkData","abi","address","contractWeb3","Contract","value"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,SAAjB,C,CAGA;;IAEMC,a;;;AAEF,yBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,uFAAMA,KAAN;;AADc,UA0BlBC,mBA1BkB,GA0BI,UAAAC,KAAK,EAAI;AAC3BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAZ;;AACA,YAAKC,QAAL,CAAc;AACZC,QAAAA,YAAY,EAAEN,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAmB,CAAnB;AADF,OAAd;;AAGA,YAAKG,WAAL,CAAiBP,KAAjB;AACH,KAhCiB;;AAAA,UAkClBQ,iBAlCkB,GAkCE,UAACC,GAAD,EAAS;AACzBA,MAAAA,GAAG,CAACC,cAAJ;AACA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwB,MAAKC,KAAL,CAAWR,YAAnC;AACAK,MAAAA,QAAQ,CAACE,MAAT,CAAgB,eAAhB,EAAiC,YAAjC;;AACA,YAAKE,QAAL;;AACApB,MAAAA,KAAK,CAACqB,IAAN,CAAW,wDAAX,EAAqEL,QAArE,EAA+E;AAC7EM,QAAAA,gBAAgB,EAAE,0BAAAC,aAAa,EAAI;AACjCjB,UAAAA,OAAO,CAACC,GAAR,CAAY,qBAAqBiB,IAAI,CAACC,KAAL,CAAWF,aAAa,CAACG,MAAd,GAAqBH,aAAa,CAACI,KAAnC,GAA2C,GAAtD,CAArB,GAAkF,GAA9F;;AACA,gBAAKjB,QAAL,CAAc;AACZkB,YAAAA,IAAI,EAAGL,aAAa,CAACG,MAAd,GAAqBH,aAAa,CAACI,KAAnC,GAA2C;AADtC,WAAd;AAGD;AAN4E,OAA/E,EAQCE,IARD,CAQM,UAAAC,GAAG,EAAI;AACXxB,QAAAA,OAAO,CAACC,GAAR,CAAYuB,GAAG,CAACC,IAAJ,CAASC,UAArB;;AACA,cAAKtB,QAAL,CAAc;AACZuB,UAAAA,GAAG,EAAEH,GAAG,CAACC,IAAJ,CAASC;AADF,SAAd;AAGD,OAbD;AAcH,KAtDiB;;AAAA,UAwDlBpB,WAxDkB,GAwDJ,UAACP,KAAD,EAAW;AACrBA,MAAAA,KAAK,CAAC6B,eAAN;AACA7B,MAAAA,KAAK,CAACU,cAAN;AACA,UAAMoB,IAAI,GAAG9B,KAAK,CAACG,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAb;AACA,UAAI2B,MAAM,GAAG,IAAIC,MAAM,CAACC,UAAX,EAAb;AACAF,MAAAA,MAAM,CAACG,iBAAP,CAAyBJ,IAAzB;;AACAC,MAAAA,MAAM,CAACI,SAAP,GAAmB;AAAA,eAAM,MAAKC,eAAL,CAAqBL,MAArB,CAAN;AAAA,OAAnB;AACH,KA/DiB;;AAAA,UAiElBK,eAjEkB;AAAA,0EAiEA,iBAAOL,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEOM,MAAM,CAACC,IAAP,CAAYP,MAAM,CAACQ,MAAnB,CAFP;;AAAA;AAERC,gBAAAA,MAFQ;;AAGd;AACA,sBAAKnC,QAAL,CAAc;AAACmC,kBAAAA,MAAM,EAANA;AAAD,iBAAd;;AAJc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAjEA;;AAAA;AAAA;AAAA;AAAA;;AAAA,UAwElBzB,QAxEkB,yEAwEP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACHnB,IAAI,CAAC6C,GAAL,CAAS,MAAK3B,KAAL,CAAW0B,MAApB,EAA4B,UAACE,GAAD,EAAMC,QAAN,EAAmB;AACjD1C,gBAAAA,OAAO,CAACC,GAAR,CAAYwC,GAAZ,EAAiBC,QAAjB,EADiD,CACtB;;AAAA;AAE3B,sBAAKtC,QAAL,CAAc;AAACsC,kBAAAA,QAAQ,EAAEA,QAAQ,CAAC,CAAD,CAAR,CAAYC;AAAvB,iBAAd;AACH,eAJK,CADG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAxEO;;AAAA,UAwHlBC,YAxHkB;AAAA,2EAwHH,kBAAOpC,GAAP;AAAA;AAAA;AAAA;AAAA;AACXA,gBAAAA,GAAG,CAACC,cAAJ;;AACA,sBAAKI,KAAL,CAAWgC,QAAX,CAAoBC,OAApB,CAA4BC,cAA5B,CAA2C,MAAKlC,KAAL,CAAWmC,OAAtD,EAA+D,UAA/D,EAA2EC,IAA3E,CAAgF;AAACZ,kBAAAA,IAAI,EAAE,MAAKxB,KAAL,CAAWmC;AAAlB,iBAAhF,EACCzB,IADD,wEACO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEO2B,0BAAAA,IAFP,GAEc;AACTC,4BAAAA,KAAK,EAAE,MAAKtC,KAAL,CAAWsC,KADT;AAETC,4BAAAA,WAAW,EAAE,MAAKvC,KAAL,CAAWuC,WAFf;AAGTC,4BAAAA,KAAK,EAAE,MAAKxC,KAAL,CAAWwC,KAHT;AAITC,4BAAAA,QAAQ,EAAE,MAAKzC,KAAL,CAAWyC,QAJZ;AAKTC,4BAAAA,IAAI,EAAE,MAAK1C,KAAL,CAAW0C,IALR;AAMTC,4BAAAA,QAAQ,EAAE,MAAK3C,KAAL,CAAW2C,QANZ;AAOTC,4BAAAA,QAAQ,EAAE,MAAK5C,KAAL,CAAW4C,QAPZ;AAQTC,4BAAAA,GAAG,EAAE,0BAA0B,MAAK7C,KAAL,CAAW6B;AARjC,2BAFd;AAYC1C,0BAAAA,OAAO,CAACC,GAAR,CAAYiD,IAAZ;AAZD;AAAA,iCAawBS,KAAK,CAAC,uCAAD,EAA0C;AAClEC,4BAAAA,MAAM,EAAE,MAD0D;AAElEC,4BAAAA,OAAO,EAAE;AAAC,8CAAgB;AAAjB,6BAFyD;AAGlEX,4BAAAA,IAAI,EAAEY,IAAI,CAACC,SAAL,CAAeb,IAAf;AAH4D,2BAA1C,CAb7B;;AAAA;AAaOc,0BAAAA,QAbP;AAmBCjC,0BAAAA,MAAM,CAACkC,QAAP,GAAkB,kBAAlB;AAnBD;AAAA;;AAAA;AAAA;AAAA;AAqBCjE,0BAAAA,OAAO,CAACC,GAAR,CAAY,aAAMiE,OAAlB;;AArBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADP;;AAFW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAxHG;;AAAA;AAAA;AAAA;AAAA;;AAEd,UAAKrD,KAAL,GAAa;AACTgC,MAAAA,QAAQ,EAAE,IADD;AAETG,MAAAA,OAAO,EAAE,EAFA;AAGTG,MAAAA,KAAK,EAAE,EAHE;AAITC,MAAAA,WAAW,EAAE,EAJJ;AAKTC,MAAAA,KAAK,EAAE,EALE;AAMTC,MAAAA,QAAQ,EAAE,EAND;AAOTC,MAAAA,IAAI,EAAE,EAPG;AAQTE,MAAAA,QAAQ,EAAE,EARD;AASTD,MAAAA,QAAQ,EAAE,EATD;AAUTnD,MAAAA,YAAY,EAAE,EAVL;AAWTsB,MAAAA,GAAG,EAAE,EAXI;AAYTL,MAAAA,IAAI,EAAE,CAZG;AAaToB,MAAAA,QAAQ,EAAE,EAbD;AAcTH,MAAAA,MAAM,EAAE,EAdC;AAeT4B,MAAAA,UAAU,EAAE,EAfH;AAgBTC,MAAAA,WAAW,EAAE,EAhBJ;AAiBTC,MAAAA,eAAe,EAAE,EAjBR;AAkBTC,MAAAA,OAAO,EAAE,EAlBA;AAmBTC,MAAAA,SAAS,EAAE;AAnBF,KAAb;AAFc;AAwBjB;;;;;;;;;;;uBA0DS,KAAKC,QAAL,E;;;;uBACA,KAAKC,kBAAL,E;;;;;;;;;;;;;;;;;;;;;;;;qBAIH1C,MAAM,CAAC2C,Q;;;;;AACR3C,gBAAAA,MAAM,CAAC4C,IAAP,GAAc,IAAInF,IAAJ,CAASuC,MAAM,CAAC2C,QAAhB,CAAd;;uBACM3C,MAAM,CAAC2C,QAAP,CAAgBE,MAAhB,E;;;;;;;AACF,oBAAG7C,MAAM,CAAC4C,IAAV,EAAe;AACnB5C,kBAAAA,MAAM,CAAC4C,IAAP,GAAc,IAAInF,IAAJ,CAASuC,MAAM,CAAC4C,IAAP,CAAYE,eAArB,CAAd;AACD,iBAFK,MAED;AACH9C,kBAAAA,MAAM,CAAC+C,KAAP,CAAa,qEAAb;AACD;;;;;;;;;;;;;;;;;;;;;;;;;AAIKH,gBAAAA,I,GAAO5C,MAAM,CAAC4C,I,EACpB;;;uBAC0BA,IAAI,CAACI,GAAL,CAASC,WAAT,E;;;AAApBC,gBAAAA,W;AACN,qBAAK7E,QAAL,CAAc;AAAC4C,kBAAAA,OAAO,EAAEiC,WAAW,CAAC,CAAD;AAArB,iBAAd;AAEMC,gBAAAA,Y,GAAeC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,C;AACrBF,gBAAAA,YAAY,CAACG,SAAb,GAAyBJ,WAAW,CAAC,CAAD,CAApC;;uBAEwBN,IAAI,CAACI,GAAL,CAASO,GAAT,CAAaC,KAAb,E;;;AAAlBC,gBAAAA,S;;uBACoB/F,eAAe,CAACgG,QAAhB,CAAyBD,SAAzB,C;;;AAApBE,gBAAAA,W;;AACN,oBAAGA,WAAH,EAAgB;AACNC,kBAAAA,GADM,GACAlG,eAAe,CAACkG,GADhB;AAENC,kBAAAA,OAFM,GAEIF,WAAW,CAACE,OAFhB;AAGNC,kBAAAA,YAHM,GAGS,IAAIlB,IAAI,CAACI,GAAL,CAASe,QAAb,CAAsBH,GAAtB,EAA2BC,OAA3B,CAHT;AAKZ,uBAAKxF,QAAL,CAAc;AAACyC,oBAAAA,QAAQ,EAAEgD;AAAX,mBAAd;AAEH,iBAPD,MAOO;AACH9D,kBAAAA,MAAM,CAAC+C,KAAP,CAAa,iDAAb;AACH;;;;;;;;;;;;;;;;;;6BAiCE;AAAA;;AACP,0BACI;AAAK,QAAA,SAAS,EAAG,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEE;AAAM,QAAA,IAAI,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEE;AAAM,QAAA,SAAS,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAM,QAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAK;AAAI,QAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAL,CADA,CADF,eAIE;AAAM,QAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAK;AAAI,QAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEAAL,CADA,CAJF,eAOE;AAAM,QAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAK,QAAA,EAAE,EAAC,WAAR;AAAoB,QAAA,SAAS,EAAC,kBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAjD,eAAyE;AAAO,QAAA,WAAW,EAAC,yBAAnB;AAA4C,QAAA,IAAI,EAAC,MAAjD;AAAwD,QAAA,QAAQ,EAAI,kBAAAtE,GAAG;AAAA,iBAAI,MAAI,CAACJ,QAAL,CAAc;AAAC+C,YAAAA,KAAK,EAAE3C,GAAG,CAACN,MAAJ,CAAW6F;AAAnB,WAAd,CAAJ;AAAA,SAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAzE,CADA,CAPF,eAUE;AAAM,QAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAK,QAAA,EAAE,EAAC,WAAR;AAAoB,QAAA,SAAS,EAAC,sBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqD;AAAG,QAAA,SAAS,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAArD,eACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mEAA4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA5C,2BADC,eAED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAK;AAAO,QAAA,EAAE,EAAC,QAAV;AAAmB,QAAA,IAAI,EAAC,MAAxB;AAA+B,QAAA,MAAM,MAArC;AAAsC,QAAA,QAAQ,EAAE,KAAKjG,mBAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAL,eAAgF;AAAO,QAAA,EAAE,EAAC,aAAV;AAAwB,QAAA,GAAG,EAAC,QAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAhF,CAFC,CADA,CAVF,eAgBS;AAAQ,QAAA,SAAS,EAAG,2BAApB;AAAgD,QAAA,OAAO,EAAI,iBAAAU,GAAG;AAAA,iBAAI,MAAI,CAACD,iBAAL,CAAuBC,GAAvB,CAAJ;AAAA,SAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhBT,eAiBE;AAAM,QAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,EAAE,EAAC,WAAR;AAAoB,QAAA,SAAS,EAAC,YAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAK,QAAA,EAAE,EAAC,iBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAA2B;AAAG,QAAA,SAAS,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAA3B,eAAkE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wDAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjC,sBAAlE,CADD,CADF,eAIE;AAAK,QAAA,EAAE,EAAC,aAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAQ,QAAA,EAAE,EAAC,QAAX;AAAoB,QAAA,QAAQ,EAAI,kBAAAA,GAAG;AAAA,iBAAI,MAAI,CAACJ,QAAL,CAAc;AAACoD,YAAAA,QAAQ,EAAEhD,GAAG,CAACN,MAAJ,CAAW6F;AAAtB,WAAd,CAAJ;AAAA,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAQ,QAAA,KAAK,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADA,eAEA;AAAQ,QAAA,KAAK,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFA,eAGA;AAAQ,QAAA,KAAK,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHA,CADA,eAOA;AAAO,QAAA,WAAW,EAAC,cAAnB;AAAiC,QAAA,EAAE,EAAC,gBAApC;AAAqD,QAAA,IAAI,EAAC,QAA1D;AAAmE,QAAA,IAAI,EAAC,WAAxE;AAAoF,QAAA,QAAQ,EAAI,kBAAAvF,GAAG;AAAA,iBAAI,MAAI,CAACJ,QAAL,CAAc;AAACmD,YAAAA,IAAI,EAAC/C,GAAG,CAACN,MAAJ,CAAW6F;AAAjB,WAAd,CAAJ;AAAA,SAAnG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPA,CAJF,CAjBF,eAiCE;AAAM,QAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,EAAE,EAAC,WAAR;AAAoB,QAAA,SAAS,EAAC,YAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAK,QAAA,EAAE,EAAC,iBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAA2B;AAAG,QAAA,SAAS,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAA3B,eAAkE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DAAoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAApC,+BAAlE,eACA;AAAK,QAAA,EAAE,EAAC,UAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAmB;AAAU,QAAA,WAAW,EAAC,+BAAtB;AAAsD,QAAA,QAAQ,EAAI,kBAAAvF,GAAG;AAAA,iBAAI,MAAI,CAACJ,QAAL,CAAc;AAACgD,YAAAA,WAAW,EAAE5C,GAAG,CAACN,MAAJ,CAAW6F;AAAzB,WAAd,CAAJ;AAAA,SAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAnB,CADA,CADD,CADF,CAjCF,eA0CI;AAAM,QAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAK,QAAA,EAAE,EAAC,WAAR;AAAoB,QAAA,SAAS,EAAC,YAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAK,QAAA,EAAE,EAAC,iBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAA2B;AAAG,QAAA,SAAS,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA3B,eAAmE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yEAAkD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAlD,yCAAnE,CADD,CADA,eAIA;AAAK,QAAA,EAAE,EAAC,gBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAS,QAAA,EAAE,EAAC,UAAZ;AAAuB,QAAA,QAAQ,EAAI,kBAAAvF,GAAG;AAAA,iBAAI,MAAI,CAACJ,QAAL,CAAc;AAACqD,YAAAA,QAAQ,EAAEjD,GAAG,CAACN,MAAJ,CAAW6F;AAAtB,WAAd,CAAJ;AAAA,SAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAQ,QAAA,KAAK,EAAC,EAAd;AAAiB,QAAA,QAAQ,MAAzB;AAA0B,QAAA,QAAQ,MAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADA,eAEA;AAAQ,QAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFA,eAGA;AAAQ,QAAA,KAAK,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHA,eAIA;AAAQ,QAAA,KAAK,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAJA,CADA,CAJA,CA1CJ,eAwDI;AAAM,QAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAK,QAAA,EAAE,EAAC,WAAR;AAAoB,QAAA,SAAS,EAAC,YAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAK,QAAA,EAAE,EAAC,iBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAA2B;AAAG,QAAA,SAAS,EAAC,UAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAA3B,eAA2E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qEAA8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA9C,uBAA3E,CADD,eAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAK;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,QAAQ,EAAI,kBAAAvF,GAAG;AAAA,iBAAI,MAAI,CAACJ,QAAL,CAAc;AAACkD,YAAAA,QAAQ,EAAE9C,GAAG,CAACN,MAAJ,CAAW6F;AAAtB,WAAd,CAAJ;AAAA,SAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAL,CAJD,CADA,CAxDJ,eAkEE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA6B;AAAQ,QAAA,EAAE,EAAC,QAAX;AAAoB,QAAA,OAAO,EAAI,KAAKnD,YAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA7B,CAlEF,CADF,CAFF,CAFF,CADA,CADF,CADJ;AAkFD;;;;EA3OyBrD,S;;AA4O3B;AAED,eAAeK,aAAf","sourcesContent":["import React, {Fragment, Component} from 'react';\r\nimport Web3 from 'web3';\r\nimport SupportChildren from \"../abis/SupportChildren.json\";\r\nimport axios from 'axios';\r\nimport ipfs from \"../ipfs\";\r\n\r\n\r\n//@author Luka\r\n\r\nclass InputCampaign extends Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            contract: null,\r\n            account: '',\r\n            title: '',\r\n            description: '',\r\n            email: '',\r\n            deadline: '',\r\n            goal: '',\r\n            category: '',\r\n            currency: '',\r\n            selectedFile: '',\r\n            img: '',\r\n            prog: 0,\r\n            ipfsHash: '',\r\n            buffer: '',\r\n            ethAddress: '',\r\n            blockNumber: '',\r\n            transactionHash: '',\r\n            gasUsed: '',\r\n            txReceipt: '',\r\n\r\n        }\r\n    }\r\n\r\n    fileSelectedHandler = event => {\r\n        console.log(event.target.files[0]);\r\n        this.setState({\r\n          selectedFile: event.target.files[0]\r\n        })\r\n        this.captureFile(event)\r\n    }\r\n    \r\n    fileUploadHandler = (evt) => {\r\n        evt.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append(\"file\", this.state.selectedFile)\r\n        formData.append(\"upload_preset\", \"nftauction\")\r\n        this.onSubmit()\r\n        axios.post(\"https://api.cloudinary.com/v1_1/tothemoon/image/upload\", formData, {\r\n          onUploadProgress: progressEvent => {\r\n            console.log(\"Upload progress \" + Math.round(progressEvent.loaded/progressEvent.total * 100) + \"%\")\r\n            this.setState({\r\n              prog : progressEvent.loaded/progressEvent.total * 100\r\n            })\r\n          }\r\n        })\r\n        .then(res => {\r\n          console.log(res.data.secure_url);\r\n          this.setState({\r\n            img: res.data.secure_url,\r\n          })\r\n        })\r\n    }\r\n\r\n    captureFile = (event) => {\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n        const file = event.target.files[0]\r\n        let reader = new window.FileReader()\r\n        reader.readAsArrayBuffer(file)\r\n        reader.onloadend = () => this.convertToBuffer(reader)\r\n    }\r\n\r\n    convertToBuffer = async (reader) => {\r\n        //file is converted to a buffer for upload to IPFS\r\n        const buffer = await Buffer.from(reader.result);\r\n        //set this buffer -using es6 syntax\r\n        this.setState({buffer});\r\n    };\r\n  \r\n    onSubmit = async () => {\r\n      await ipfs.add(this.state.buffer, (err, ipfsHash) => {\r\n          console.log(err, ipfsHash);//TODO\r\n  \r\n          this.setState({ipfsHash: ipfsHash[0].hash});\r\n      }) //await ipfs.add\r\n    };\r\n    \r\n    \r\n    async componentWillMount() {\r\n        await this.loadWeb3();\r\n        await this.loadBlockchainData();\r\n    } \r\n    \r\n    async loadWeb3(){\r\n        if(window.ethereum){\r\n          window.web3 = new Web3(window.ethereum)\r\n          await window.ethereum.enable()\r\n        }else if(window.web3){\r\n          window.web3 = new Web3(window.web3.currentProvider)\r\n        }else{\r\n          window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\r\n        }\r\n    }\r\n    \r\n    async loadBlockchainData() {\r\n        const web3 = window.web3\r\n        // Load account\r\n        const accountWeb3 = await web3.eth.getAccounts()\r\n        this.setState({account: accountWeb3[0]})\r\n\r\n        const addressField = document.getElementById(\"address\")\r\n        addressField.innerHTML = accountWeb3[0]\r\n    \r\n        const networkId = await web3.eth.net.getId()\r\n        const networkData = await SupportChildren.networks[networkId]\r\n        if(networkData) {\r\n            const abi = SupportChildren.abi\r\n            const address = networkData.address\r\n            const contractWeb3 = new web3.eth.Contract(abi, address)\r\n    \r\n            this.setState({contract: contractWeb3})\r\n    \r\n        } else {\r\n            window.alert('Smart contract not deployed to detected network')\r\n        }\r\n    }\r\n\r\n    onSubmitForm = async (evt) => {\r\n        evt.preventDefault();\r\n        this.state.contract.methods.createCampaign(this.state.account, 1928010725).send({from: this.state.account})\r\n        .then( async () => {\r\n                try {\r\n                const body = {\r\n                    title: this.state.title,\r\n                    description: this.state.description, \r\n                    email: this.state.email, \r\n                    deadline: this.state.deadline, \r\n                    goal: this.state.goal,\r\n                    currency: this.state.currency,\r\n                    category: this.state.category,\r\n                    url: \"https://ipfs.io/ipfs/\" + this.state.ipfsHash\r\n                };\r\n                console.log(body);\r\n                const response = await fetch(\"http://localhost:5000/create-campaign\", {\r\n                    method: \"POST\",\r\n                    headers: {\"Content-Type\": \"application/json\"},\r\n                    body: JSON.stringify(body)\r\n                });\r\n\r\n                window.location = \"/create-campaign\";\r\n            } catch (error) {\r\n                console.log(error.message);\r\n            }\r\n        })\r\n        \r\n    }\r\n    \r\n  render() {\r\n    return (\r\n        <div className = \"rootdiv\">\r\n          <div className=\"container-fluid\">\r\n          <div className=\"row\">\r\n         \r\n            <main role=\"main\">\r\n            \r\n              <div  className=\"content\">\r\n                <form>\r\n                  <span className=\"clearfix\">\r\n                  <div><h1 className=\"formTitle\">Fundraising information</h1></div>\r\n                  </span>\r\n                  <span className=\"clearfix\">\r\n                  <div><h2 className=\"formUnderTitle\">Add the Fundraising information in the fields below.</h2></div>\r\n                  </span>\r\n                  <span className=\"clearfix\">\r\n                  <div id=\"visina100\" className=\"fundraisingTitle\"><p>Fundraising title</p><input placeholder=\"Enter Fundraising title\"type=\"text\" onChange = {evt => this.setState({title: evt.target.value})}/></div> \r\n                  </span>\r\n                  <span className=\"clearfix\">\r\n                  <div id=\"visina150\" className=\"fundraisingMainImage\"><p className=\"paragraf\">Fundrasing main image</p>\r\n                 <p>This image will appear as the cover photo<br/> for your fundraising.</p>\r\n                 <div><input id=\"upload\" type=\"file\" hidden onChange={this.fileSelectedHandler}/><label id=\"uploadLabel\" for=\"upload\"></label></div>\r\n                 \r\n                   </div>\r\n                  </span><button className = \"uploadBtn btn btn-primary\" onClick = {evt => this.fileUploadHandler(evt)}>Upload</button>\r\n                  <span className=\"clearfix\">\r\n                    <div id=\"visina100\" className=\"amountNeed\">\r\n                     <div id=\"amountNeedtekst\"> <p className=\"paragraf\">Amount need</p><p>Enter the amount you need for <br/>your fundraising.</p></div>\r\n                    </div>\r\n                    <div id=\"inputSelect\">\r\n                    <select id=\"kripto\" onChange = {evt => this.setState({currency: evt.target.value})}>\r\n                    <option value=\"eth\">ETH</option>\r\n                    <option value=\"btc\">BTC</option>\r\n                    <option value=\"ltc\">LTC</option>\r\n  \r\n                    </select>\r\n                    <input placeholder=\"Enter amount\"id=\"amountNeedbroj\" type=\"number\" step=\"0.0000001\" onChange = {evt => this.setState({goal:evt.target.value})}></input>\r\n                    \r\n  \r\n                    </div>\r\n                  </span>\r\n                  <span className=\"clearfix\">\r\n                    <div id=\"visina150\" className=\"amountNeed\">\r\n                     <div id=\"amountNeedtekst\"> <p className=\"paragraf\">Description</p><p>Explain your reasons why are you <br/>starting this fundraising.</p>\r\n                     <div id=\"textarea\"><textarea placeholder=\"Enter fundraising description\" onChange = {evt => this.setState({description: evt.target.value})}></textarea></div>\r\n                     </div>\r\n                     \r\n                    </div>\r\n                    \r\n                    </span>\r\n                    <span className=\"clearfix\">\r\n                    <div id=\"visina100\" className=\"amountNeed\">\r\n                     <div id=\"amountNeedtekst\"> <p className=\"paragraf\">Add category</p><p>These images will appear as additional photos, <br/>which will help donators your story.</p></div>\r\n                    </div>\r\n                    <div id=\"categorySelect\">\r\n                    <select  id=\"category\" onChange = {evt => this.setState({category: evt.target.value})}>\r\n                    <option value=\"\" disabled selected>Pick a category</option>\r\n                    <option value=\"health\">Health</option>\r\n                    <option value=\"education\">Education</option>\r\n                    <option value=\"Last wish\">Last wish</option>\r\n  \r\n                    </select>\r\n                    </div>\r\n                    </span>\r\n                    <span className=\"clearfix\">\r\n                    <div id=\"visina150\" className=\"amountNeed\">\r\n                     <div id=\"amountNeedtekst\"> <p className=\"paragraf\">End of the fundraise</p><p>Let know other people when is the end date <br/>of your fundraise.</p>\r\n                     \r\n                     </div>\r\n                     <div><input type=\"date\" onChange = {evt => this.setState({deadline: evt.target.value})}></input></div>\r\n                     \r\n                    </div>\r\n                    \r\n                    </span>\r\n                  <div className=\"dugmeCreate\"><button id=\"create\" onClick = {this.onSubmitForm}>Create</button></div>\r\n                </form>\r\n              </div>\r\n            </main>\r\n          </div>\r\n        </div>\r\n        </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default InputCampaign;"]},"metadata":{},"sourceType":"module"}